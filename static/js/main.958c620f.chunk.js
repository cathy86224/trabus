(this.webpackJsonptrabus=this.webpackJsonptrabus||[]).push([[0],{190:function(e,t,s){},191:function(e,t,s){},192:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),i=s(36),c=s.n(i),n=(s(82),s(2)),o=s(3),l=s(5),d=s(4),u=["https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=ca&startDT=2020-01-01&endDT=2020-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=az&startDT=2020-01-01&endDT=2020-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=nm&startDT=2020-01-01&endDT=2020-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=ca&startDT=2019-01-01&endDT=2019-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=az&startDT=2019-01-01&endDT=2019-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=nm&startDT=2019-01-01&endDT=2019-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=ca&startDT=2018-01-01&endDT=2018-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=az&startDT=2018-01-01&endDT=2018-12-31&parameterCd=00054&siteStatus=active","https://waterservices.usgs.gov/nwis/dv/?format=json&stateCd=nm&startDT=2018-01-01&endDT=2018-12-31&parameterCd=00054&siteStatus=active"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=["2018","2019","2020"],j=s(6),p=s.p+"static/media/logo.848cecd3.svg",m=s(1),b={ca:"California",az:"Arizona",nm:"New Mexico"},f=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).selectionStateClicked=function(){a.setState({stateClicked:!a.state.stateClicked})},a.selectionReservoirClicked=function(){a.setState({reservoirClicked:!a.state.reservoirClicked})},a.stateSelected=function(e){a.reserviorsFilter(e),a.setState({stateSelected:e,stateClicked:!1}),a.props.getStateSelected(e)},a.reservoirSelected=function(e){var t=a.state.reservoirList[e];a.setState({reservoirSelected:t,reservoirClicked:!1}),a.props.getReservoirSelected(e),a.props.getReservoirSelectedName(t)},a.state={stateClicked:!1,stateSelected:"",reservoirClicked:!1,reservoirSelected:"",reservoirList:{},markerSelected:[]},a}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e,t){if(t.stateSelected!==this.state.stateSelected){this.setState({reservoirSelected:""})}e.reservoirSelectedName!==this.props.reservoirSelectedName&&this.setState({markerSelected:this.props.mapClicked})}},{key:"getReservoirName",value:function(e){var t=this,s=e.filter((function(e){return e.sourceInfo.siteCode[0].value===t.props.mapSelectedRes&&0!==e.values[0].value.length}))[0].sourceInfo.siteName;return s=(s=s.split(",")[0].toLowerCase()).replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}))}},{key:"stateItemClassName",value:function(){var e="item state";return this.state.stateClicked?e+" clicked":e}},{key:"reservoirItemClassName",value:function(){var e="item";return this.state.reservoirClicked?"item clicked":e}},{key:"reserviorsFilter",value:function(e){var t,s=this.props.data20[e],a={},r=Object(j.a)(s);try{for(r.s();!(t=r.n()).done;){var i=t.value,c=i.sourceInfo.siteCode[0].value,n=i.sourceInfo.siteName.split(",")[0].toLowerCase();n=n.replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()})),a.hasOwnProperty(c)||(a[c]=n)}}catch(o){r.e(o)}finally{r.f()}this.setState({reservoirList:a})}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"selections",children:[Object(m.jsx)("img",{className:"logo",src:p,alt:"Trabus logo"}),Object(m.jsxs)("div",{className:"selection-wrap states",children:[Object(m.jsx)("div",{className:"selection states",onClick:this.selectionStateClicked,children:""===this.state.stateSelected?"Select a state":b[this.state.stateSelected]}),Object(m.jsx)("div",{className:"items",children:Object.keys(b).map((function(t){return Object(m.jsx)("div",{className:e.stateItemClassName(),onClick:function(){return e.stateSelected(t)},children:b[t]},t)}))})]}),Object(m.jsx)("div",{className:"selection-wrap reservoir",children:""!==this.state.stateSelected?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"selection reservoirs",onClick:this.selectionReservoirClicked,children:""===this.state.reservoirSelected?"Select a reservoir":this.state.reservoirSelected}),Object(m.jsx)("div",{className:"items reservoir",children:Object.keys(this.state.reservoirList).map((function(t){return Object(m.jsx)("div",{className:e.reservoirItemClassName(),onClick:function(){return e.reservoirSelected(t)},children:e.state.reservoirList[t]},t)}))})]}):Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"selection disable",children:"Select a reservoirs"})})})]})}}]),s}(a.Component),g=s(8),S=s(7),O=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).averageMonth=function(e,t){for(var s=new Array(12).fill(0),r=Object(S.a)(e[0]),i=Object(S.a)(e[1]),c=0;c<12;c++){for(var n=0,o=0;0!==r.length;){if(parseInt(r[0].split("-")[0])!==c+1)break;n+=i.shift(),r.shift(),o++}0!==o&&(n/=o,s[c]=Math.round(n).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}a.setState(Object(g.a)({},"avg"+t,s))},a.state={avg20:[],avg19:[],avg18:[]},a}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.updateTableValue()}},{key:"componentDidMount",value:function(){this.updateTableValue()}},{key:"updateTableValue",value:function(){this.averageMonth(this.props.table20,"20"),this.averageMonth(this.props.table19,"19"),this.averageMonth(this.props.table18,"18")}},{key:"displayTable",value:function(e){return 0===e?"EQP":e}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"table",children:[Object(m.jsx)("div",{className:"table-title",children:"Average Reservoir Storage"}),Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:" "}),v.map((function(e){return Object(m.jsx)("th",{children:e},e)}))]}),h.map((function(t,s){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t}),Object(m.jsx)("td",{children:e.displayTable(e.state.avg18[s])}),Object(m.jsx)("td",{children:e.displayTable(e.state.avg19[s])}),Object(m.jsx)("td",{children:e.displayTable(e.state.avg20[s])})]},t)}))]})}),Object(m.jsx)("div",{className:"table-note",children:Object(m.jsx)("i",{children:"*EQP = Value affected by equipment malfunction."})})]})}}]),s}(a.Component),C=s(76),x=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).getValues=function(e){var t,s=e.filter((function(e){return e.sourceInfo.siteCode[0].value===a.props.states.reservoirSelected&&0!==e.values[0].value.length}))[0].values[0].value,r=[],i=[],c=Object(j.a)(s);try{for(c.s();!(t=c.n()).done;){var n=t.value,o=parseInt(n.value),l=n.dateTime.split("T")[0].substring(5);o>0&&(i.push(o),r.push(l))}}catch(d){c.e(d)}finally{c.f()}return[r,i]},a.state={time:[],value:[],display:!1},a}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e){if(e.states.stateSelected!==this.props.states.stateSelected)this.setState({display:!1});else if(e.states.reservoirSelected!==this.props.states.reservoirSelected){var t=this.props.states.data20[this.props.states.stateSelected],s=this.props.states.data19[this.props.states.stateSelected],a=this.props.states.data18[this.props.states.stateSelected],r=this.getValues(t),i=this.getValues(s),c=this.getValues(a);this.setState({time:r[0],value:r[1],display:!0,table20:r,table19:i,table18:c})}}},{key:"displayChartData",value:function(){return{labels:this.state.time,datasets:[{label:"acre-feet",data:this.state.value,backgroundColor:"#577b94"}]}}},{key:"render",value:function(){return Object(m.jsx)(r.a.Fragment,{children:this.state.display&&Object(m.jsxs)("div",{className:"chart",children:[Object(m.jsxs)("div",{className:"title",children:[this.props.states.reservoirSelectedName," ","2020 Daily Acre-Feet Values"]}),Object(m.jsxs)("div",{className:"bar-chart",children:[Object(m.jsx)(C.a,{data:this.displayChartData()}),Object(m.jsx)(O,{table20:this.state.table20,table19:this.state.table19,table18:this.state.table18,resName:this.props.states.reservoirSelected})]})]})})}}]),s}(a.Component),k=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsxs)("div",{className:"logo-wrap",children:[Object(m.jsx)("img",{src:p,alt:"logo"}),"Impact Through Technical Innovation"]}),Object(m.jsxs)("div",{className:"contact",children:[Object(m.jsx)("div",{className:"header",children:Object(m.jsx)("b",{children:"COMPANY"})}),Object(m.jsx)("a",{className:"item",href:"https://trabus.com/about/",target:"_blank",rel:"noreferrer",children:"About Us"}),Object(m.jsx)("a",{className:"item",href:"https://trabus.com/careers/",target:"_blank",rel:"noreferrer",children:"Careers"}),Object(m.jsx)("a",{className:"item",href:"https://trabus.com/contact/",target:"_blank",rel:"noreferrer",children:"Contact"})]}),Object(m.jsxs)("div",{className:"contact",children:[Object(m.jsx)("div",{className:"header",children:Object(m.jsx)("b",{children:"SOCIAL MEDIA"})}),Object(m.jsx)("a",{className:"item",href:"https://www.facebook.com/Trabus-Technologies-143543429114409/",target:"_blank",rel:"noreferrer",children:"Facebook"}),Object(m.jsx)("a",{className:"item",href:"https://www.linkedin.com/company/trabus-technologies/",target:"_blank",rel:"noreferrer",children:"LinkedIn"})]})]}),Object(m.jsx)("div",{className:"copyright",children:"Copyright \xa9 2021 TRABUS Technologies - Cathy Hsieh. All Rights Reserved."})]})}}]),s}(a.Component),N=s(194),y=s(197),w=s(195),T=s(196),D=(s(190),[36.548927,-110.093735]),I=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).getLocations=function(){for(var e=a.props.data,t=[],s=[],r=[],i=[],c=0,n=Object.keys(e);c<n.length;c++){var o,l=n[c],d=Object(j.a)(e[l]);try{for(d.s();!(o=d.n()).done;){var u=o.value,h=u.sourceInfo.geoLocation.geogLocation.latitude,v=u.sourceInfo.geoLocation.geogLocation.longitude,p=u.sourceInfo.siteName,m=u.sourceInfo.siteCode[0].value;r.includes(p)||(r.push(p),t.push([h,v]),s.push(m),i.push(l))}}catch(b){d.e(b)}finally{d.f()}}a.setState({locations:t,names:r,ids:s,geoState:i})},a.state={locations:[],names:[],ids:[],geoState:[]},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.getLocations()}},{key:"mapClassName",value:function(){return""!==this.props.resName?"map with-table":"map"}},{key:"markerClicked",value:function(e){var t=this.state.ids[e],s=this.state.geoState[e],a=this.state.names[e];a=(a=a.split(",")[0].toLowerCase()).replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()})),this.props.getStateSelected(s),this.props.getReservoirSelected(t),this.props.getReservoirSelectedName(a)}},{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:this.mapClassName(),children:Object(m.jsxs)(N.a,{center:D,zoom:6,maxZoom:11,minZoom:5,children:[Object(m.jsx)(y.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.locations.map((function(t,s){return Object(m.jsx)(w.a,{position:t,eventHandlers:{click:function(){e.markerClicked(s)}},children:Object(m.jsxs)(T.a,{children:[Object(m.jsx)("div",{className:"site-name",children:e.state.names[s]}),Object(m.jsxs)("div",{className:"site-id",children:["Site code: ",e.state.ids[s]]})]})},t[0])}))]})})}}]),s}(a.Component),R=s.p+"static/media/loading.2048467f.gif",L=(s(191),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).getStateSelected=function(e){a.setState({stateSelected:e})},a.getReservoirSelected=function(e){a.setState({reservoirSelected:e})},a.getReservoirSelectedName=function(e){a.setState({reservoirSelectedName:e})},a.state={data20:{ca:[],az:[],nm:[]},stateSelected:"",reservoirSelected:"",reservoirSelectedName:""},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;Promise.all(u.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e.value.timeSeries}))}))).then((function(t){e.setState({data20:{ca:t[0],az:t[1],nm:t[2]},data19:{ca:t[3],az:t[4],nm:t[5]},data18:{ca:t[6],az:t[7],nm:t[8]}})}))}},{key:"render",value:function(){var e=this.state.data20;return 0===e.ca.length||0===e.az.length||0===e.nm.length?Object(m.jsx)("div",{className:"loading",children:Object(m.jsx)("img",{src:R,alt:"Loading GIF"})}):Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)(I,{data:e,getStateSelected:this.getStateSelected,getReservoirSelected:this.getReservoirSelected,resName:this.state.reservoirSelected,getReservoirSelectedName:this.getReservoirSelectedName}),Object(m.jsx)(x,{states:this.state}),Object(m.jsx)(f,{data20:e,getStateSelected:this.getStateSelected,getReservoirSelected:this.getReservoirSelected,mapSelectedRes:this.state.reservoirSelected,mapSelectedState:this.state.stateSelected,reservoirSelectedName:this.state.reservoirSelectedName,getReservoirSelectedName:this.getReservoirSelectedName}),Object(m.jsx)(k,{})]})}}]),s}(a.Component));var M=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(L,{})})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,198)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;s(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root")),A()},82:function(e,t,s){}},[[192,1,2]]]);
//# sourceMappingURL=main.958c620f.chunk.js.map